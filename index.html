<!DOCTYPE HTML>
<html>
    <head>
        <title>///TIMER///</title>
        <link href="css/bootstrap.css" rel="stylesheet">
        
    </head>
    <body style = "background-color: #111111">
    <script src="js/jquery-1.12.0.js"></script>
    <script src="js/bootstrap.js"></script>
            <div class = "HexGrid">
            <div class = "timer" id="Timer">
                
                <div class = "container row center-block">
                    <div class = "noticeBlock"><p class = "bigSizeChar">倒計時模式</p><p  class = "smallSizeChar">TIMER MODE</p></div>
                    <div class = "noticeBlock"><p class = "bigSizeChar">倒計時模式</p><p  class = "smallSizeChar">TIMER MODE</p></div>
                </div>
                <div class = "container row center-block">
                    <div class = "noticeBlock"><p class = "bigSizeChar">連接器正常</p><p  class = "smallSizeChar">CONNECTED</p></div>
                    <div class = "noticeBlock"><p class = "bigSizeChar">連接器正常</p><p  class = "smallSizeChar">CONNECTED</p></div>
                    <div class = "noticeBlock"><p class = "bigSizeChar">連接器正常</p><p  class = "smallSizeChar">CONNECTED</p></div>
                    <div class = "noticeBlock"><p class = "bigSizeChar">連接器正常</p><p  class = "smallSizeChar">CONNECTED</p></div>
                </div>
            <div class = "buttons">
                    <button class = "StartButton" type = "button" id ="Start"><p class = "bigSizeChar">執行</p><p  class = "smallSizeChar">START</p></button>
                    <button class = "ResetButton" type = "button" id ="Reset"><p class = "bigSizeChar">復位</p><p  class = "smallSizeChar">RESET</p></button>
                    <button class = "StopButton" type = "button" id ="Stop"><p class = "bigSizeChar">終止</p><p  class = "smallSizeChar">STOP</p></button>
                    <button class = "PauseButton" type = "button" id ="Pause"><p class = "bigSizeChar">中斷</p><p  class = "smallSizeChar">PAUSE</p></button>
                    <button class = "incrMin" type = "button" id = "incrMin"></button>
                    <button class = "incrSec" type = "button" id = "incrSec"></button>
            </div>
            <div class = "remainTimeNotice">
                <p class = "remainTime">距離時間結束</p>
                <p class = "remainTime">REMAINING TIME</p>
                <p class = "remainTime">還有</p>
            </div>
            <div class = "countdown">
                <div class="clock" id = "Clock">
                    <ul>
                        <li id="min"></li>
                        <li id="point">:</li>
                        <li id="sec"></li>
                        <li id="point2">:</li>
                        <li id="millisec"></li>
                    </ul>
                </div>
            </div>
        </div>
    </body>
    <script>
        $(document).ready(function(){
            
            var seconds = 0;
            var min = 0;
            var millisec = 0;
            var paused = false;
            var running = null;
            var blinking = null;
            
            function jump(){
                $("#Timer").animate({top: '-=200px',opacity: '0.9'},150);
                $("#Timer").animate({opacity: '0.9'},75);
                $("#Timer").animate({top: '+=200px',opacity: '1'},150);
            }
            function init(){
                $('.StartButton').attr('disabled','disabled');
                $('.ResetButton').attr('disabled','disabled');
                $('.StopButton').attr('disabled','disabled');
                $('.PauseButton').attr('disabled','disabled');
                seconds = 0;
                $("#sec").html((seconds<10?"0":"") + seconds);
                min = 0;
                $("#min").html(min);
                millisec = 0;
                $("#millisec").html((millisec<10?"0":"" )+ millisec);
            }
            
            function blink() {
                $("#sec").animate({opacity:'0'},200);
                $("#sec").animate({opacity:'0.7'},800);
                $("#min").animate({opacity:'0'},200);
                $("#min").animate({opacity:'0.7'},800);
                $("#millisec").animate({opacity:'0'},200);
                $("#millisec").animate({opacity:'0.7'},800);
                $("#point").animate({opacity:'0'},200);
                $("#point").animate({opacity:'0.7'},800);
                $("#point2").animate({opacity:'0'},200);
                $("#point2").animate({opacity:'0.7'},800);
            }
            
            function countdown() {
                if(millisec!=0){
                    millisec--;
                }else{
                    if(seconds!=0){
                        seconds--;
                        millisec=99;
                    }else{
                        if(min!=0){
                            min--;
                            seconds=59;
                            millisec=99;
                            $("#min").html(min);
                        }else{
                            $('.PauseButton').attr('disabled','disabled');
                            clearInterval(running);
                            blink();
                            blinking = setInterval(blink,1000);
                        }
                    }
                    $("#sec").html((seconds<10?"0":"") + seconds);
                }
                $("#millisec").html(( millisec < 10 ? "0" : "" ) + millisec);
            }
            
            $("#incrMin").click(function(){
                if(min>=9){
                    min=0;
                }
                else{
                    min++;
                }
                $("#min").html(min);
                if((min==0)&&(seconds==0)){
                    $('.StartButton').attr('disabled','disabled');
                    $('.ResetButton').attr('disabled','disabled');
                }else{
                    $('.StartButton').removeAttr('disabled');
                    $('.ResetButton').removeAttr('disabled');
                }
            });
            
            $("#incrSec").click(function(){
                if(seconds>=59){
                    seconds=0;
                }
                else{
                    seconds++;
                }
                $("#sec").html((seconds<10?"0":"") + seconds);
                if(min==0&&seconds==0){
                    $('.StartButton').attr('disabled','disabled');
                    $('.ResetButton').attr('disabled','disabled');
                }else{
                    $('.StartButton').removeAttr('disabled');
                    $('.ResetButton').removeAttr('disabled');
                }
            });
            
            $("#Start").click(function(){
                jump();
                $('.StartButton').attr('disabled','disabled');
                $('.ResetButton').attr('disabled','disabled');
                $('.incrMin').attr('disabled','disabled');
                $('.incrSec').attr('disabled','disabled');
                $('.StopButton').removeAttr('disabled');
                $('.PauseButton').removeAttr('disabled');
                running = setInterval(countdown,10);
            });
            
            $("#Pause").click(function(){
                if(paused==false){
                    clearInterval(running);
                    $("#Pause").find('.bigSizeChar').text('續行');
                    $("#Pause").find('.smallSizeChar').text('Resume');
                    paused=true;
                }
                else{
                    $("#Pause").find('.bigSizeChar').text('中斷');
                    $("#Pause").find('.smallSizeChar').text('Pause');
                    running = setInterval(countdown,10);
                    paused=false; 
                }
            });
            
            $("#Reset").click(function(){
                seconds = 0;
                $("#sec").html((seconds<10?"0":"") + seconds);
                min = 0;
                $("#min").html(min);
                millisec = 0;
                $("#millisec").html((millisec<10?"0":"" )+ millisec);
                $('.StartButton').attr('disabled','disabled');
                $('.ResetButton').attr('disabled','disabled');
            });
            
            $("#Stop").click(function(){
                clearInterval(running);
                clearInterval(blinking);
                $('.StopButton').attr('disabled','disabled');
                $('.PauseButton').attr('disabled','disabled');
                $('.incrMin').removeAttr('disabled');
                $('.incrSec').removeAttr('disabled');
                paused = false;
                $("#Pause").find('.bigSizeChar').text('中斷');
                $("#Pause").find('.smallSizeChar').text('Pause');
                init();
                $("#sec").finish();
                $("#min").finish();
                $("#millisec").finish();
                $("#point").finish();
                $("#point2").finish();
            });       
            init();
        });
    </script>
</html>